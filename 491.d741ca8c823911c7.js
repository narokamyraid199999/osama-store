"use strict";(self.webpackChunkangularEcommerce=self.webpackChunkangularEcommerce||[]).push([[491],{4491:(se,m,u)=>{u.r(m),u.d(m,{SettingModule:()=>ne});var c=u(6814),d=u(6261),e=u(5879);let h=(()=>{class r{constructor(t){this._router=t}navegate(t){this._router.navigate(["setting/"+t])}static#e=this.\u0275fac=function(n){return new(n||r)(e.Y36(d.F0))};static#r=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-setting"]],decls:9,vars:0,consts:[[1,"container","mx-auto","px-[10%]"],[1,"grid","grid-cols-4"],[1,"flex","flex-col","gap-y-8","mt-8","col-span-1"],[1,"bg-green-500","rounded-md","px-4","py-4","text-xl","capitalize","text-white","hover:shadow-md","hover:shadow-green-300",3,"click"],[1,"bg-blue-500","rounded-md","px-4","py-4","text-xl","capitalize","text-white","hover:shadow-md","hover:shadow-blue-300",3,"click"],[1,"col-span-3"]],template:function(n,s){1&n&&(e.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"button",3),e.NdJ("click",function(){return s.navegate("password")}),e._uU(4," update my password "),e.qZA(),e.TgZ(5,"button",4),e.NdJ("click",function(){return s.navegate("userinfo")}),e._uU(6," update my info "),e.qZA()(),e.TgZ(7,"div",5),e._UZ(8,"router-outlet"),e.qZA()()())},dependencies:[d.lC]})}return r})();var o=u(6223),g=u(9862);let _=(()=>{class r{constructor(t){this.httpClient=t}changePassword(t){return this.httpClient.put("https://ecommerce.routemisr.com/api/v1/users/changeMyPassword",t)}updateUserInfo(t){return this.httpClient.put("https://ecommerce.routemisr.com/api/v1/users/updateMe/",t)}static#e=this.\u0275fac=function(n){return new(n||r)(e.LFG(g.eN))};static#r=this.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var f=u(2639);function w(r,l){if(1&r&&(e.TgZ(0,"p",20),e._uU(1),e.qZA()),2&r){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.errorMsg?t.errorMsg:t.successMsg," ")}}const x=function(r,l){return{"bg-red-200":r,"bg-green-200":l}};function I(r,l){if(1&r&&(e.TgZ(0,"div",18),e.YNc(1,w,2,1,"p",19),e.qZA()),2&r){const t=e.oxw();e.Q6J("ngClass",e.WLB(2,x,t.errorMsg,t.successMsg)),e.xp6(1),e.Q6J("ngIf",t.errorMsg)}}function v(r,l){1&r&&(e.TgZ(0,"p",23),e._uU(1," * required "),e.qZA())}function Z(r,l){1&r&&(e.TgZ(0,"p",23),e._uU(1," * min length 8 char "),e.qZA())}function T(r,l){1&r&&(e.TgZ(0,"p",23),e._uU(1," * max length 16 char "),e.qZA())}function U(r,l){if(1&r&&(e.TgZ(0,"div",21),e.YNc(1,v,2,0,"p",22),e.YNc(2,Z,2,0,"p",22),e.YNc(3,T,2,0,"p",22),e.qZA()),2&r){const t=e.oxw();let n,s,a;e.xp6(1),e.Q6J("ngIf",null==(n=t.passwordForm.get("currentPassword"))?null:n.getError("required")),e.xp6(1),e.Q6J("ngIf",null==(s=t.passwordForm.get("currentPassword"))?null:s.getError("minlength")),e.xp6(1),e.Q6J("ngIf",null==(a=t.passwordForm.get("currentPassword"))?null:a.getError("maxlength"))}}function F(r,l){1&r&&(e.TgZ(0,"p",23),e._uU(1," * required "),e.qZA())}function A(r,l){1&r&&(e.TgZ(0,"p",23),e._uU(1," * min length 8 char "),e.qZA())}function q(r,l){1&r&&(e.TgZ(0,"p",23),e._uU(1," * max length 16 char "),e.qZA())}function C(r,l){1&r&&(e.TgZ(0,"p",23),e._uU(1," * password and repassword not matched "),e.qZA())}function b(r,l){1&r&&(e.TgZ(0,"p",23),e._uU(1," current password cant be same as password "),e.qZA())}function y(r,l){if(1&r&&(e.TgZ(0,"div",21),e.YNc(1,F,2,0,"p",22),e.YNc(2,A,2,0,"p",22),e.YNc(3,q,2,0,"p",22),e.YNc(4,C,2,0,"p",22),e.YNc(5,b,2,0,"p",22),e.qZA()),2&r){const t=e.oxw();let n,s,a,i,p;e.xp6(1),e.Q6J("ngIf",null==t.passwordForm||null==(n=t.passwordForm.get("password"))?null:n.getError("required")),e.xp6(1),e.Q6J("ngIf",null==t.passwordForm||null==(s=t.passwordForm.get("password"))?null:s.getError("minlength")),e.xp6(1),e.Q6J("ngIf",null==t.passwordForm||null==(a=t.passwordForm.get("password"))?null:a.getError("maxlength")),e.xp6(1),e.Q6J("ngIf",null==t.passwordForm||null==(i=t.passwordForm.get("password"))?null:i.getError("passwordMisMatch")),e.xp6(1),e.Q6J("ngIf",null==t.passwordForm||null==(p=t.passwordForm.get("password"))?null:p.getError("mismatcherror"))}}function J(r,l){1&r&&(e.TgZ(0,"p",23),e._uU(1," * required "),e.qZA())}function N(r,l){1&r&&(e.TgZ(0,"p",23),e._uU(1," * min length 8 char "),e.qZA())}function P(r,l){1&r&&(e.TgZ(0,"p",23),e._uU(1," * max length 16 char "),e.qZA())}function Y(r,l){1&r&&(e.TgZ(0,"p",23),e._uU(1," * password and repassword not matched "),e.qZA())}function M(r,l){if(1&r&&(e.TgZ(0,"div",21),e.YNc(1,J,2,0,"p",22),e.YNc(2,N,2,0,"p",22),e.YNc(3,P,2,0,"p",22),e.YNc(4,Y,2,0,"p",22),e.qZA()),2&r){const t=e.oxw();let n,s,a,i;e.xp6(1),e.Q6J("ngIf",null==t.passwordForm||null==(n=t.passwordForm.get("rePassword"))?null:n.getError("required")),e.xp6(1),e.Q6J("ngIf",null==t.passwordForm||null==(s=t.passwordForm.get("rePassword"))?null:s.getError("minlength")),e.xp6(1),e.Q6J("ngIf",null==t.passwordForm||null==(a=t.passwordForm.get("rePassword"))?null:a.getError("maxlength")),e.xp6(1),e.Q6J("ngIf",null==t.passwordForm||null==(i=t.passwordForm.get("password"))?null:i.getError("passwordMisMatch"))}}function Q(r,l){1&r&&(e.TgZ(0,"div"),e._UZ(1,"i",24),e.qZA())}function k(r,l){1&r&&(e.TgZ(0,"span"),e._uU(1,"change password"),e.qZA())}function E(r,l){if(1&r&&(e.TgZ(0,"p",20),e._uU(1),e.qZA()),2&r){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.errorMsg?t.errorMsg:t.successMsg," ")}}const S=function(r,l){return{"bg-red-200":r,"bg-green-200":l}};function z(r,l){if(1&r&&(e.TgZ(0,"div",18),e.YNc(1,E,2,1,"p",19),e.qZA()),2&r){const t=e.oxw();e.Q6J("ngClass",e.WLB(2,S,t.errorMsg,t.successMsg)),e.xp6(1),e.Q6J("ngIf",t.errorMsg)}}function j(r,l){1&r&&(e.TgZ(0,"p",23),e._uU(1," * required "),e.qZA())}function B(r,l){1&r&&(e.TgZ(0,"p",23),e._uU(1," * min length 8 char "),e.qZA())}function G(r,l){1&r&&(e.TgZ(0,"p",23),e._uU(1," * max length 16 char "),e.qZA())}function O(r,l){if(1&r&&(e.TgZ(0,"div",21),e.YNc(1,j,2,0,"p",22),e.YNc(2,B,2,0,"p",22),e.YNc(3,G,2,0,"p",22),e.qZA()),2&r){const t=e.oxw();let n,s,a;e.xp6(1),e.Q6J("ngIf",null==(n=t.userInfoForm.get("name"))?null:n.getError("required")),e.xp6(1),e.Q6J("ngIf",null==(s=t.userInfoForm.get("name"))?null:s.getError("minlength")),e.xp6(1),e.Q6J("ngIf",null==(a=t.userInfoForm.get("name"))?null:a.getError("maxlength"))}}function X(r,l){1&r&&(e.TgZ(0,"p",23),e._uU(1," * required "),e.qZA())}function V(r,l){1&r&&(e.TgZ(0,"p",23),e._uU(1," * invalid email address "),e.qZA())}function W(r,l){if(1&r&&(e.TgZ(0,"div",21),e.YNc(1,X,2,0,"p",22),e.YNc(2,V,2,0,"p",22),e.qZA()),2&r){const t=e.oxw();let n,s;e.xp6(1),e.Q6J("ngIf",null==t.userInfoForm||null==(n=t.userInfoForm.get("email"))?null:n.getError("required")),e.xp6(1),e.Q6J("ngIf",null==t.userInfoForm||null==(s=t.userInfoForm.get("email"))?null:s.getError("email"))}}function D(r,l){1&r&&(e.TgZ(0,"p",23),e._uU(1," * required "),e.qZA())}function R(r,l){1&r&&(e.TgZ(0,"p",23),e._uU(1," * min length 8 char "),e.qZA())}function H(r,l){1&r&&(e.TgZ(0,"p",23),e._uU(1," * max length 16 char "),e.qZA())}function K(r,l){if(1&r&&(e.TgZ(0,"div",21),e.YNc(1,D,2,0,"p",22),e.YNc(2,R,2,0,"p",22),e.YNc(3,H,2,0,"p",22),e.qZA()),2&r){const t=e.oxw();let n,s,a;e.xp6(1),e.Q6J("ngIf",null==t.userInfoForm||null==(n=t.userInfoForm.get("phone"))?null:n.getError("required")),e.xp6(1),e.Q6J("ngIf",null==t.userInfoForm||null==(s=t.userInfoForm.get("phone"))?null:s.getError("minlength")),e.xp6(1),e.Q6J("ngIf",null==t.userInfoForm||null==(a=t.userInfoForm.get("phone"))?null:a.getError("maxlength"))}}function $(r,l){1&r&&(e.TgZ(0,"div"),e._UZ(1,"i",24),e.qZA())}function ee(r,l){1&r&&(e.TgZ(0,"span"),e._uU(1,"change Info"),e.qZA())}const re=[{path:"",component:h,children:[{path:"password",component:(()=>{class r{constructor(t,n,s){this._changeService=t,this._router=n,this._authService=s,this.test="",this.isLoading=!1,this.errorMsg="",this.successMsg="",this.currentPassword="",this.password="",this.repassword="",this.passwordForm=new o.cw({currentPassword:new o.NI("",[o.kI.required,o.kI.minLength(8),o.kI.maxLength(16)]),password:new o.NI("",[o.kI.required,o.kI.minLength(8),o.kI.maxLength(16)]),rePassword:new o.NI("",[o.kI.required,o.kI.minLength(8),o.kI.maxLength(16)])},{validators:this.passwordValidator})}passwordValidator(t){let n=null;return(t?.get("currentPassword")?.value==t?.get("password")?.value||t?.get("currentPassword")?.value==t?.get("rePassword")?.value)&&(n={mismatcherror:"current password cant be same as password"},t?.get("password")?.setErrors(n)),t?.get("rePassword")?.value!=t?.get("password")?.value?(n={passwordMisMatch:"password and repassword not mathced!"},t?.get("password")?.setErrors(n)):n=null,n}markAllAsTouched(t){Object.values(t.controls).forEach(n=>n.markAsTouched())}changePassword(t){this.successMsg="",this.errorMsg="",this.markAllAsTouched(t),t.valid&&!this.isLoading&&(this.isLoading=!0,this._changeService.changePassword(t.value).subscribe({next:n=>{"success"==n?.message&&(this.isLoading=!1,this.successMsg="password changed successfully",localStorage.removeItem("userToken"),this._router.navigate(["/login"]),this._authService.setjwtToken()),console.log(n)},error:n=>{this.errorMsg=n?.error?.errors?.msg,console.log(this.errorMsg),this.isLoading=!1}}))}static#e=this.\u0275fac=function(n){return new(n||r)(e.Y36(_),e.Y36(d.F0),e.Y36(f.g))};static#r=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-user-password"]],decls:27,vars:7,consts:[[1,"w-full"],[1,"container","mx-auto","mt-[3rem]","px-[20%]"],[3,"formGroup","ngSubmit"],[1,"mb-8","capitalize"],[1,"text-3xl"],["class","mb-4 rounded-md p-2 pt-3 w-full",3,"ngClass",4,"ngIf"],[1,"mb-1"],[1,"text-xl","my-1","capitalize"],["formControlName","currentPassword","type","password","placeholder","*********",1,"text-xl","border-y-2","border-x-2","border-gray-400","w-full","pl-2","py-2","rounded-sm"],["class","bg-red-200 w-2/3 rounded-md p-2",4,"ngIf"],[1,"my-4"],["formControlName","password","type","password","placeholder","*********",1,"text-xl","border-y-2","border-x-2","border-gray-400","w-full","pl-2","py-2","rounded-sm"],[1,"mb-4"],["formControlName","rePassword","type","password","placeholder","*********",1,"text-xl","border-y-2","border-x-2","border-gray-400","w-full","pl-2","py-2","rounded-sm"],[1,"my-4","flex","justify-between","items-center"],[1,"w-full","my-4"],["type","submit",1,"bg-green-500","rounded-md","px-4","py-2","text-2xl","capitalize","text-white","w-full","shadow-sm"],[4,"ngIf"],[1,"mb-4","rounded-md","p-2","pt-3","w-full",3,"ngClass"],["class","capitalize text-2xl",4,"ngIf"],[1,"capitalize","text-2xl"],[1,"bg-red-200","w-2/3","rounded-md","p-2"],["class","capitalize",4,"ngIf"],[1,"capitalize"],[1,"fa-solid","fa-spinner","text-3xl"]],template:function(n,s){if(1&n&&(e.TgZ(0,"section",0)(1,"div",1)(2,"form",2),e.NdJ("ngSubmit",function(){return s.changePassword(s.passwordForm)}),e.TgZ(3,"h2",3)(4,"span",4),e._uU(5,"reset my password:"),e.qZA()(),e.YNc(6,I,2,5,"div",5),e.TgZ(7,"div",6)(8,"p",7),e._uU(9,"current passsword"),e.qZA(),e._UZ(10,"input",8),e.YNc(11,U,4,3,"div",9),e.qZA(),e.TgZ(12,"div",10)(13,"p",7),e._uU(14,"password"),e.qZA(),e._UZ(15,"input",11),e.YNc(16,y,6,5,"div",9),e.qZA(),e.TgZ(17,"div",12)(18,"p",7),e._uU(19,"re password"),e.qZA(),e._UZ(20,"input",13),e.YNc(21,M,5,4,"div",9),e.qZA(),e.TgZ(22,"div",14)(23,"div",15)(24,"button",16),e.YNc(25,Q,2,0,"div",17),e.YNc(26,k,2,0,"span",17),e.qZA()()()()()()),2&n){let a,i,p;e.xp6(2),e.Q6J("formGroup",s.passwordForm),e.xp6(4),e.Q6J("ngIf",s.successMsg||s.errorMsg),e.xp6(5),e.Q6J("ngIf",(null==(a=s.passwordForm.get("currentPassword"))?null:a.errors)&&(null==(a=s.passwordForm.get("currentPassword"))?null:a.touched)),e.xp6(5),e.Q6J("ngIf",(null==(i=s.passwordForm.get("password"))?null:i.errors)&&(null==(i=s.passwordForm.get("password"))?null:i.touched)),e.xp6(5),e.Q6J("ngIf",(null==s.passwordForm||null==(p=s.passwordForm.get("rePassword"))?null:p.errors)&&(null==s.passwordForm||null==(p=s.passwordForm.get("rePassword"))?null:p.touched)),e.xp6(4),e.Q6J("ngIf",s.isLoading),e.xp6(1),e.Q6J("ngIf",!s.isLoading)}},dependencies:[c.mk,c.O5,o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u]})}return r})()},{path:"userinfo",component:(()=>{class r{constructor(t,n,s){this._changeService=t,this._auth=n,this._router=s,this.successMsg="",this.errorMsg="",this.isLoading=!1,this.userInfoForm=new o.cw({name:new o.NI("",[o.kI.required,o.kI.minLength(3),o.kI.maxLength(20)]),email:new o.NI("",[o.kI.required,o.kI.email]),phone:new o.NI("",[o.kI.required,o.kI.minLength(11),o.kI.maxLength(11)])})}markAllAsTouched(t){Object.values(t.controls).forEach(n=>n.markAsTouched())}changeUserInfo(t){this.markAllAsTouched(t),t.valid&&!this.isLoading&&(this.errorMsg="",this.successMsg="",this.isLoading=!0,this._changeService.updateUserInfo(t.value).subscribe({next:n=>{console.log(n),this.isLoading=!1,"success"==n?.message&&(this.successMsg=n?.message,this._auth.setjwtToken(),localStorage.removeItem("userToken"),this._router.navigate(["/login"]))},error:n=>{console.log("error",n),this.isLoading=!1,this.errorMsg=n?.error?.errors?.msg}}))}static#e=this.\u0275fac=function(n){return new(n||r)(e.Y36(_),e.Y36(f.g),e.Y36(d.F0))};static#r=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-user-info"]],decls:27,vars:7,consts:[[1,"w-full"],[1,"container","mx-auto","mt-[3rem]","px-[20%]"],[3,"formGroup","ngSubmit"],[1,"mb-8","capitalize"],[1,"text-3xl"],["class","mb-4 rounded-md p-2 pt-3 w-full",3,"ngClass",4,"ngIf"],[1,"mb-1"],[1,"text-xl","my-1","capitalize"],["formControlName","name","type","text","placeholder","jhon Doe",1,"text-xl","border-y-2","border-x-2","border-gray-400","w-full","pl-2","py-2","rounded-sm"],["class","bg-red-200 w-2/3 rounded-md p-2",4,"ngIf"],[1,"my-4"],["formControlName","email","type","email","placeholder","example@gmail.com",1,"text-xl","border-y-2","border-x-2","border-gray-400","w-full","pl-2","py-2","rounded-sm"],[1,"mb-4"],["formControlName","phone","type","text","placeholder","01001511111",1,"text-xl","border-y-2","border-x-2","border-gray-400","w-full","pl-2","py-2","rounded-sm"],[1,"my-4","flex","justify-between","items-center"],[1,"w-full","my-4"],["type","submit",1,"bg-blue-500","rounded-md","px-4","py-2","text-2xl","capitalize","text-white","w-full","shadow-sm"],[4,"ngIf"],[1,"mb-4","rounded-md","p-2","pt-3","w-full",3,"ngClass"],["class","capitalize text-2xl",4,"ngIf"],[1,"capitalize","text-2xl"],[1,"bg-red-200","w-2/3","rounded-md","p-2"],["class","capitalize",4,"ngIf"],[1,"capitalize"],[1,"fa-solid","fa-spinner","text-3xl"]],template:function(n,s){if(1&n&&(e.TgZ(0,"section",0)(1,"div",1)(2,"form",2),e.NdJ("ngSubmit",function(){return s.changeUserInfo(s.userInfoForm)}),e.TgZ(3,"h2",3)(4,"span",4),e._uU(5,"Update My Info:"),e.qZA()(),e.YNc(6,z,2,5,"div",5),e.TgZ(7,"div",6)(8,"p",7),e._uU(9,"name"),e.qZA(),e._UZ(10,"input",8),e.YNc(11,O,4,3,"div",9),e.qZA(),e.TgZ(12,"div",10)(13,"p",7),e._uU(14,"email"),e.qZA(),e._UZ(15,"input",11),e.YNc(16,W,3,2,"div",9),e.qZA(),e.TgZ(17,"div",12)(18,"p",7),e._uU(19,"phone"),e.qZA(),e._UZ(20,"input",13),e.YNc(21,K,4,3,"div",9),e.qZA(),e.TgZ(22,"div",14)(23,"div",15)(24,"button",16),e.YNc(25,$,2,0,"div",17),e.YNc(26,ee,2,0,"span",17),e.qZA()()()()()()),2&n){let a,i,p;e.xp6(2),e.Q6J("formGroup",s.userInfoForm),e.xp6(4),e.Q6J("ngIf",s.successMsg||s.errorMsg),e.xp6(5),e.Q6J("ngIf",(null==(a=s.userInfoForm.get("name"))?null:a.errors)&&(null==(a=s.userInfoForm.get("name"))?null:a.touched)),e.xp6(5),e.Q6J("ngIf",(null==(i=s.userInfoForm.get("email"))?null:i.errors)&&(null==(i=s.userInfoForm.get("email"))?null:i.touched)),e.xp6(5),e.Q6J("ngIf",(null==s.userInfoForm||null==(p=s.userInfoForm.get("phone"))?null:p.errors)&&(null==s.userInfoForm||null==(p=s.userInfoForm.get("phone"))?null:p.touched)),e.xp6(4),e.Q6J("ngIf",s.isLoading),e.xp6(1),e.Q6J("ngIf",!s.isLoading)}},dependencies:[c.mk,c.O5,o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u]})}return r})()}]}];let te=(()=>{class r{static#e=this.\u0275fac=function(n){return new(n||r)};static#r=this.\u0275mod=e.oAB({type:r});static#t=this.\u0275inj=e.cJS({imports:[d.Bz.forChild(re),d.Bz]})}return r})(),ne=(()=>{class r{static#e=this.\u0275fac=function(n){return new(n||r)};static#r=this.\u0275mod=e.oAB({type:r});static#t=this.\u0275inj=e.cJS({imports:[c.ez,te,o.u5,o.UX,g.JF]})}return r})()}}]);