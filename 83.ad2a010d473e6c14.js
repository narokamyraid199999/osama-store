"use strict";(self.webpackChunkangularEcommerce=self.webpackChunkangularEcommerce||[]).push([[83],{1083:(I,d,i)=>{i.r(d),i.d(d,{CartModule:()=>U});var s=i(6814),a=i(6261),p=i(7394),t=i(5879),g=i(7422);function _(r,c){1&r&&(t.TgZ(0,"div",3),t._UZ(1,"i",4),t.qZA())}function h(r,c){1&r&&(t.TgZ(0,"h2",9)(1,"span",10),t._uU(2,"Shopping Cart Is Empity"),t.qZA(),t._UZ(3,"i",11),t.qZA())}function m(r,c){1&r&&(t.TgZ(0,"div")(1,"p",12)(2,"a",13),t._uU(3,"Go To Shopping"),t.qZA()()())}function x(r,c){if(1&r){const e=t.EpF();t.TgZ(0,"tr",28)(1,"td",29),t._uU(2),t.qZA(),t.TgZ(3,"td",30),t._UZ(4,"img",31),t.qZA(),t.TgZ(5,"td",32),t._uU(6),t.qZA(),t.TgZ(7,"td",30),t._uU(8),t.ALo(9,"currency"),t.qZA(),t.TgZ(10,"td",33)(11,"div")(12,"input",34),t.NdJ("input",function(n){const u=t.CHM(e).$implicit,w=t.oxw(3);return t.KtG(w.incressCount(u,n))}),t.qZA()()(),t.TgZ(13,"td")(14,"button",35),t.NdJ("click",function(){const l=t.CHM(e).$implicit,u=t.oxw(3);return t.KtG(u.deleteItem(l.product.id))}),t._UZ(15,"i",36),t.TgZ(16,"span",37),t._uU(17,"remove"),t.qZA()()()()}if(2&r){const e=c.$implicit;t.xp6(2),t.Oqu(e.product.title),t.xp6(2),t.Q6J("src",e.product.imageCover,t.LSH),t.xp6(2),t.hij(" ",e.product.quantity," "),t.xp6(2),t.Oqu(t.xi3(9,7,e.price,"USD")),t.xp6(4),t.Q6J("max",e.product.quantity)("min",1)("value",e.count)}}function f(r,c){1&r&&(t.TgZ(0,"div"),t._UZ(1,"i",38),t.TgZ(2,"p",39),t._uU(3,"loading"),t.qZA()())}function b(r,c){1&r&&(t.TgZ(0,"span",40),t._uU(1,"pay with cash"),t.qZA())}const y=function(r){return["/checkout",r]};function v(r,c){if(1&r){const e=t.EpF();t.TgZ(0,"table",14)(1,"thead")(2,"tr",15)(3,"td",16),t._uU(4," PRODUCT "),t.qZA(),t.TgZ(5,"td",16),t._uU(6," IMG "),t.qZA(),t.TgZ(7,"td",16),t._uU(8," QUANTITY "),t.qZA(),t.TgZ(9,"td",16),t._uU(10," PRICE "),t.qZA(),t.TgZ(11,"td",17),t._uU(12," item "),t.qZA(),t.TgZ(13,"td",17),t._uU(14," delete item "),t.qZA()()(),t.TgZ(15,"tbody"),t.YNc(16,x,18,10,"tr",18),t.TgZ(17,"tr")(18,"div",19)(19,"p")(20,"span",20),t._uU(21,"total price"),t.qZA()(),t.TgZ(22,"p",21),t._uU(23),t.ALo(24,"currency"),t.qZA()()(),t.TgZ(25,"tr")(26,"td")(27,"a",22),t._uU(28," online payment "),t.qZA()(),t.TgZ(29,"td",23)(30,"button",24),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.payOnCach(n.cartProducts.data._id))}),t.YNc(31,f,4,0,"div",7),t.YNc(32,b,2,0,"span",25),t.qZA()(),t.TgZ(33,"td")(34,"div",26)(35,"button",27),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.clearCart())}),t._uU(36," clear "),t.qZA()()(),t.TgZ(37,"td")(38,"div",26)(39,"button",27),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.getAllProducts())}),t._uU(40," update "),t.qZA()()()()()()}if(2&r){const e=t.oxw(2);t.xp6(16),t.Q6J("ngForOf",e.cartProducts.data.products),t.xp6(7),t.hij(" ",t.xi3(24,5,e.totalProductPrice,"USD")," "),t.xp6(4),t.Q6J("routerLink",t.VKq(8,y,e.cartProducts.data._id)),t.xp6(4),t.Q6J("ngIf",e.isPayLoading),t.xp6(1),t.Q6J("ngIf",!e.isPayLoading)}}function Z(r,c){if(1&r&&(t.TgZ(0,"div",5),t.YNc(1,h,4,0,"h2",6),t.TgZ(2,"div"),t.YNc(3,m,4,0,"div",7),t.YNc(4,v,41,10,"table",8),t.qZA()()),2&r){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",0==e.products.length),t.xp6(2),t.Q6J("ngIf",0==e.products.length),t.xp6(1),t.Q6J("ngIf",e.cartProducts.data.products.length>0)}}let C=(()=>{class r{constructor(e,o){this._cartService=e,this._router=o,this.cardRequest=new p.w0,this.cartProducts={},this.products=[],this.isLoading=!0,this.isPayLoading=!1,this.onlineLoader=!1,this.totalProductPrice=0}ngOnInit(){this.getAllProducts()}ngOnDestroy(){this.cardRequest.unsubscribe()}getAllProducts(){this.cardRequest=this._cartService.getAllProducts().subscribe({next:e=>{this.cartProducts=e,console.log(this.cartProducts),this.products=this.cartProducts.data.products,this.totalProductPrice=this.cartProducts.data.totalCartPrice,this._cartService.numberOfProducts.next(e.numOfCartItems),this.isLoading=!1},error:e=>{this.products=[],this.isLoading=!1}})}clearCart(){this.cardRequest=this.cardRequest=this._cartService.clearCart().subscribe({next:e=>{this.cartProducts.data.products=[],this._cartService.numberOfProducts.next(0),this.products=[]},error:e=>{console.log(e)}})}deleteItem(e){this._cartService.deleteItem(e).subscribe({next:o=>{this.getAllProducts(),this._cartService.numberOfProducts.next(o?.numOfCartItems)}})}goToHome(){this._router.navigate(["/home"])}incressCount(e,o){e.count>=1&&e.count<=e.product.quantity&&parseInt(o.target.value)>=1&&(e.count=o.target.value,this.cardRequest=this._cartService.updateProductQuiantity(e.product.id,e.count).subscribe({next:n=>{console.log(n)},error:n=>{console.log(n)}}))}decressCount(e){e.count>1&&(e.count-=1,this.cardRequest=this._cartService.updateProductQuiantity(e.product.id,e.count).subscribe({next:o=>{console.log(o)},error:o=>{console.log("error updating product quantity",o)}}))}payOnCach(e){this.isPayLoading=!0,this._cartService.payCach(e).subscribe({next:o=>{"success"==o.status&&(console.log("order placed res ",o),this._router.navigate(["cart/thankyou"]),this._cartService.numberOfProducts.next(0)),this.isPayLoading=!1},error:o=>{console.log("error placing order",o),this.isPayLoading=!1}})}static#t=this.\u0275fac=function(o){return new(o||r)(t.Y36(g.y),t.Y36(a.F0))};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["app-cart"]],decls:3,vars:2,consts:[[1,"bg-slate-100","pt-[5%]","pb-[10%]","px-[15%]"],["class","flex justify-center py-36",4,"ngIf"],["class","container mx-auto pb-8",4,"ngIf"],[1,"flex","justify-center","py-36"],[1,"fa-solid","fa-spinner","text-7xl"],[1,"container","mx-auto","pb-8"],["class","text-center pb-[7%] font-bold",4,"ngIf"],[4,"ngIf"],["class","table mx-auto bg-white rounded-md shadow-md",4,"ngIf"],[1,"text-center","pb-[7%]","font-bold"],[1,"text-4xl"],[1,"mt-2","ml-2","text-4xl","fa-solid","fa-face-sad-tear"],[1,"text-center","font-bold","text-3xl"],["routerLink","/home",1,"capitalize","underline","hover:cursor-pointer","hover:text-blue-600","text-2xl"],[1,"table","mx-auto","bg-white","rounded-md","shadow-md"],[1,"p-10"],[1,"uppercase","border-b-2","pl-3","pb-3","pt-10","font-bold","pr-28"],[1,"uppercase","border-b-2","pl-3","pb-3","py-10","font-bold","pr-3"],["class","p-10 border-b-2",4,"ngFor","ngForOf"],[1,"flex","justify-between","items-center","border-green-500","border-b-2","mt-4"],[1,"capitalize","text-xl","py-4","pl-2","font-bold"],[1,"text-xl","py-4"],[1,"hover:bg-green-500","transition-all","duration-75","px-4","py-4","font-bold","bg-green-600","text-white","rounded-sm","shadow-md",3,"routerLink"],[1,"my-8","mr-4"],[1,"ml-4","hover:bg-green-500","transition-all","duration-75","py-4","px-8","font-bold","bg-green-600","text-white","rounded-sm","shadow-md",3,"click"],["class","w-full",4,"ngIf"],[1,"py-8","pl-4"],[1,"hover:bg-blue-800","transition-all","duration-75","px-20","py-2","uppercase","font-bold","bg-blue-900","text-white","rounded-sm","shadow-md",3,"click"],[1,"p-10","border-b-2"],[1,"pl-3","pr-32"],[1,"p-3","pr-20"],["width","150px","height","20px",3,"src"],[1,"pl-3","pb-3","pt-3"],[1,""],["type","number",1,"py-4","px-2","border-y-2","border-x-2","border-green-500",3,"max","min","value","input"],[1,"py-2","px-2","mr-14","bg-re","uppercase","font-bold","text-white","rounded-full","hover:bg-gray-100",3,"click"],[1,"fa-solid","fa-trash","text-red-500","hover:text-red-400","text-xl","mr-1"],[1,"text-red-500","hover:text-red-400"],[1,"fa-solid","fa-spinner","text-2xl"],[1,"text-sm"],[1,"w-full"]],template:function(o,n){1&o&&(t.TgZ(0,"section",0),t.YNc(1,_,2,0,"div",1),t.YNc(2,Z,5,3,"div",2),t.qZA()),2&o&&(t.xp6(1),t.Q6J("ngIf",n.isLoading),t.xp6(1),t.Q6J("ngIf",!n.isLoading))},dependencies:[s.sg,s.O5,a.rH,s.H9]})}return r})(),T=(()=>{class r{static#t=this.\u0275fac=function(o){return new(o||r)};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["app-thankyou"]],decls:13,vars:0,consts:[[1,"container","mx-auto","mt-20"],[1,"my-8","text-center","capitalize","jost"],[1,"text-8xl"],[1,"flex","justify-center","my-4"],[1,"fa-regular","fa-circle-check","text-8xl","text-green-500"],[1,"my-8","capitalize","text-center","text-2xl","text-gray-500"],[1,"text-center","mb-20","capitalize","underline","hover:cursor-pointer","text-orange-600","hover:text-orange-500","text-xl"],["routerLink","/home"]],template:function(o,n){1&o&&(t.TgZ(0,"section")(1,"div",0)(2,"h2",1)(3,"span",2),t._uU(4,"thank you for your order"),t.qZA()(),t.TgZ(5,"div",3),t._UZ(6,"i",4),t.qZA(),t.TgZ(7,"p",5)(8,"span"),t._uU(9,"your order has been placed and is being processed. you will receive an email with the order details"),t.qZA()(),t.TgZ(10,"p",6)(11,"a",7),t._uU(12,"go to home"),t.qZA()()()())},dependencies:[a.rH],styles:['@import"https://fonts.googleapis.com/css2?family=Jost:ital,wght@0,100..900;1,100..900&family=Marhey:wght@300..700&display=swap";.jost[_ngcontent-%COMP%]{font-family:Jost,sans-serif;font-optical-sizing:auto;font-weight:400;font-style:normal}']})}return r})();const q=[{path:"",component:C},{path:"thankyou",canActivate:[i(2225).p],component:T}];let P=(()=>{class r{static#t=this.\u0275fac=function(o){return new(o||r)};static#e=this.\u0275mod=t.oAB({type:r});static#r=this.\u0275inj=t.cJS({imports:[a.Bz.forChild(q),a.Bz]})}return r})(),U=(()=>{class r{static#t=this.\u0275fac=function(o){return new(o||r)};static#e=this.\u0275mod=t.oAB({type:r});static#r=this.\u0275inj=t.cJS({imports:[s.ez,P]})}return r})()}}]);